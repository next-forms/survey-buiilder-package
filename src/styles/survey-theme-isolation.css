/* Survey Theme Isolation CSS for Survey Form Package
 * Self-contained theme isolation that works with Tailwind and OKLCH colors
 */

/* Survey Theme Scoped Variables */
.survey-theme-light {
  --survey-bg: oklch(0.99 0.002 286);
  --survey-surface: oklch(1 0 0);
  --survey-border: oklch(0.94 0.002 286.32);
  --survey-text: oklch(0.141 0.005 285.823);
  --survey-text-muted: oklch(0.552 0.016 285.938);
  --survey-input: oklch(0.96 0.002 286.32);
  --survey-ring: oklch(0.705 0.015 286.067);
  --survey-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --survey-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);

  /* Default Font Variables */
  --survey-font-primary: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --survey-font-secondary: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --survey-font-heading: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --survey-font-body: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --survey-font-monospace: ui-monospace, Menlo, Monaco, "Cascadia Code", "Courier New", monospace;

  /* Default Font Weights */
  --survey-font-weight-normal: 400;
  --survey-font-weight-medium: 500;
  --survey-font-weight-semibold: 600;
  --survey-font-weight-bold: 700;
}

.survey-theme-dark {
  --survey-bg: oklch(0.141 0.005 285.823);
  --survey-surface: oklch(0.21 0.006 285.885);
  --survey-border: oklch(1 0 0 / 12%);
  --survey-text: oklch(0.985 0 0);
  --survey-text-muted: oklch(0.705 0.015 286.067);
  --survey-input: oklch(1 0 0 / 18%);
  --survey-ring: oklch(0.552 0.016 285.938);
  --survey-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
  --survey-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
}

.survey-theme-system {
  --survey-bg: oklch(0.99 0.002 286);
  --survey-surface: oklch(1 0 0);
  --survey-border: oklch(0.94 0.002 286.32);
  --survey-text: oklch(0.141 0.005 285.823);
  --survey-text-muted: oklch(0.552 0.016 285.938);
  --survey-input: oklch(0.96 0.002 286.32);
  --survey-ring: oklch(0.705 0.015 286.067);
  --survey-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --survey-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

@media (prefers-color-scheme: dark) {
  .survey-theme-system {
    --survey-bg: oklch(0.141 0.005 285.823);
    --survey-surface: oklch(0.21 0.006 285.885);
    --survey-border: oklch(1 0 0 / 12%);
    --survey-text: oklch(0.985 0 0);
    --survey-text-muted: oklch(0.705 0.015 286.067);
    --survey-input: oklch(1 0 0 / 18%);
    --survey-ring: oklch(0.552 0.016 285.938);
    --survey-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
    --survey-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
  }
}

/* Survey Container Base Styles */
.survey-theme-container {
  background-color: var(--survey-bg);
  color: var(--survey-text);
  font-family: var(--survey-font-body, var(--survey-font-primary));
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Apply font to all text elements in survey */
.survey-isolated-content {
  font-family: var(--survey-font-body, var(--survey-font-primary));
}

/* Apply heading font to headings */
.survey-isolated-content h1,
.survey-isolated-content h2,
.survey-isolated-content h3,
.survey-isolated-content h4,
.survey-isolated-content h5,
.survey-isolated-content h6 {
  font-family: var(--survey-font-heading, var(--survey-font-primary));
}

/* Apply monospace font to code and pre elements */
.survey-isolated-content code,
.survey-isolated-content pre {
  font-family: var(--survey-font-monospace);
}

/* Tailwind Class Overrides within Survey Scope */
.survey-isolated-content .bg-background,
.survey-isolated-content .bg-white {
  background-color: var(--survey-bg);
}

.survey-isolated-content .bg-card,
.survey-isolated-content .bg-popover {
  background-color: var(--survey-surface);
}

.survey-isolated-content .bg-muted,
.survey-isolated-content .bg-secondary,
.survey-isolated-content .bg-accent {
  background-color: var(--survey-input);
}

.survey-isolated-content .text-foreground,
.survey-isolated-content .text-card-foreground,
.survey-isolated-content .text-popover-foreground {
  color: var(--survey-text);
}

.survey-isolated-content .text-muted-foreground,
.survey-isolated-content .text-secondary-foreground,
.survey-isolated-content .text-accent-foreground {
  color: var(--survey-text-muted);
}

.survey-isolated-content .border,
.survey-isolated-content .border-border,
.survey-isolated-content .border-input {
  border-color: var(--survey-border);
}

/* Form Elements */
.survey-isolated-content input,
.survey-isolated-content textarea,
.survey-isolated-content select {
  background-color: var(--survey-surface);
  color: var(--survey-text);
  border-color: var(--survey-border);
}

.survey-isolated-content input:focus,
.survey-isolated-content textarea:focus,
.survey-isolated-content select:focus {
  border-color: var(--survey-primary);
  box-shadow: 0 0 0 2px color-mix(in oklch, var(--survey-primary) 20%, transparent);
  outline: none;
}

.survey-isolated-content input::placeholder,
.survey-isolated-content textarea::placeholder {
  color: var(--survey-text-muted);
}

/* Button Styling with Theme Colors */
.survey-isolated-content .bg-primary:not(button):not([data-slot="button"]) {
  background-color: var(--survey-primary);
}

.survey-isolated-content button[class*="primary"],
.survey-isolated-content .btn-primary {
  background-color: var(--survey-primary);
  border-color: var(--survey-primary);
  /* Don't force color on buttons - let theme classes handle it */
}

.survey-isolated-content .bg-secondary,
.survey-isolated-content button[class*="secondary"],
.survey-isolated-content .btn-secondary {
  background-color: var(--survey-secondary);
  border-color: var(--survey-secondary);
}

.survey-isolated-content button[variant="outline"],
.survey-isolated-content .btn-outline {
  background-color: transparent;
  border-color: var(--survey-border);
  color: var(--survey-text);
}

.survey-isolated-content button[variant="outline"]:hover,
.survey-isolated-content .btn-outline:hover {
  background-color: var(--survey-input);
}

.survey-isolated-content button[variant="ghost"],
.survey-isolated-content .btn-ghost {
  background-color: transparent;
  color: var(--survey-text);
}

.survey-isolated-content button[variant="ghost"]:hover,
.survey-isolated-content .btn-ghost:hover {
  background-color: var(--survey-input);
}

/* Card and Surface Elements */
.survey-isolated-content .card,
.survey-isolated-content [data-card],
.survey-isolated-content .gumroad-card {
  background-color: var(--survey-surface);
  border-color: var(--survey-border);
  color: var(--survey-text);
  box-shadow: var(--survey-shadow);
}

.survey-isolated-content .card:hover,
.survey-isolated-content [data-card]:hover,
.survey-isolated-content .gumroad-card:hover {
  box-shadow: var(--survey-shadow-lg);
}


/* Override any specific text color classes that might interfere - but not for buttons */
.survey-isolated-content :not(button):not([data-slot="button"]).text-foreground,
.survey-isolated-content :not(button):not([data-slot="button"]).text-primary,
.survey-isolated-content :not(button):not([data-slot="button"]).text-secondary,
.survey-isolated-content :not(button):not([data-slot="button"]).text-black,
.survey-isolated-content :not(button):not([data-slot="button"]).text-gray-900,
.survey-isolated-content :not(button):not([data-slot="button"]).text-gray-800,
.survey-isolated-content :not(button):not([data-slot="button"]).text-gray-700 {
  color: var(--survey-text);
}

/* Preserve button text colors with explicit values */
.survey-isolated-content button.text-white,
.survey-isolated-content [data-slot="button"].text-white {
  color: #ffffff;
}

.survey-isolated-content button.text-black,
.survey-isolated-content [data-slot="button"].text-black {
  color: #000000;
}

/* Don't override inline styles or custom color classes on buttons */
.survey-isolated-content button[style*="color"],
.survey-isolated-content [data-slot="button"][style*="color"] {
  /* Inline styles should take precedence */
}

/* Form Controls */
.survey-isolated-content input[type="checkbox"],
.survey-isolated-content input[type="radio"] {
  accent-color: var(--survey-primary);
}

/* Progress Indicators */
.survey-isolated-content .bg-primary,
.survey-isolated-content [class*="progress-bar"] {
  background-color: var(--survey-primary);
}

.survey-isolated-content [class*="progress-track"] {
  background-color: var(--survey-border);
}

/* Selectable Boxes */
.survey-isolated-content .selectable-box {
  background-color: var(--survey-surface);
  border-color: var(--survey-border);
  color: var(--survey-text);
  transition: all 0.2s ease;
}

.survey-isolated-content .selectable-box:hover {
  border-color: var(--survey-primary);
  box-shadow: var(--survey-shadow);
  transform: translateY(-1px);
}

.survey-isolated-content .selectable-box.selected {
  border-color: var(--survey-primary);
  background-color: var(--survey-primary);
  color: white;
}

.survey-isolated-content .selectable-box.selected * {
  color: white;
}

/* State Colors */
.survey-isolated-content .text-destructive,
.survey-isolated-content .error {
  color: var(--survey-error);
}

.survey-isolated-content .border-destructive {
  border-color: var(--survey-error);
}

.survey-isolated-content .text-green-600,
.survey-isolated-content .success {
  color: var(--survey-success);
}

.survey-isolated-content .border-green-600 {
  border-color: var(--survey-success);
}

/* Dropdown and Popover Menus */
.survey-isolated-content .bg-popover,
.survey-isolated-content [role="menu"],
.survey-isolated-content [role="listbox"] {
  background-color: var(--survey-surface);
  border-color: var(--survey-border);
  box-shadow: var(--survey-shadow-lg);
}

.survey-isolated-content [role="menuitem"],
.survey-isolated-content [role="option"] {
  color: var(--survey-text);
}

.survey-isolated-content [role="menuitem"]:hover,
.survey-isolated-content [role="option"]:hover {
  background-color: var(--survey-input);
}

/* Tab Controls */
.survey-isolated-content [role="tablist"] {
  border-color: var(--survey-border);
}

.survey-isolated-content [role="tab"] {
  color: var(--survey-text-muted);
  border-color: transparent;
}

.survey-isolated-content [role="tab"][aria-selected="true"] {
  color: var(--survey-text);
  border-color: var(--survey-primary);
}

/* Focus States */
.survey-isolated-content *:focus-visible {
  outline: 2px solid var(--survey-ring);
  outline-offset: 2px;
}

.survey-isolated-content input:focus-visible,
.survey-isolated-content textarea:focus-visible,
.survey-isolated-content select:focus-visible {
  outline: none;
  border-color: var(--survey-primary);
  box-shadow: 0 0 0 2px color-mix(in oklch, var(--survey-primary) 20%, transparent);
}

/* Scrollbar Styling */
.survey-theme-container::-webkit-scrollbar {
  width: 8px;
}

.survey-theme-container::-webkit-scrollbar-track {
  background: var(--survey-surface);
  border-radius: 4px;
}

.survey-theme-container::-webkit-scrollbar-thumb {
  background: var(--survey-border);
  border-radius: 4px;
}

.survey-theme-container::-webkit-scrollbar-thumb:hover {
  background: var(--survey-text-muted);
}

/* Shadow Utilities for Survey Scope */
.survey-isolated-content .shadow-sm {
  box-shadow: var(--survey-shadow);
}

.survey-isolated-content .shadow,
.survey-isolated-content .shadow-md {
  box-shadow: var(--survey-shadow);
}

.survey-isolated-content .shadow-lg,
.survey-isolated-content .shadow-xl {
  box-shadow: var(--survey-shadow-lg);
}

/* Empty State Styling */
.survey-empty-state {
  background-color: var(--survey-surface);
  border-color: var(--survey-border);
  color: var(--survey-text-muted);
  transition: all 0.3s ease;
}

/* Preserve Gumroad Design Language */
.survey-isolated-content .rounded-organic {
  border-radius: 1.5rem;
}

.survey-isolated-content .rounded-blob {
  border-radius: 2rem 1rem 2rem 1rem;
}

.survey-isolated-content .animate-float {
  animation: survey-float 6s ease-in-out infinite;
}

@keyframes survey-float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
}

/* Soft gradient backgrounds for survey scope */
.survey-isolated-content .bg-soft-gradient {
  background: linear-gradient(135deg, 
    var(--survey-bg) 0%, 
    var(--survey-surface) 100%);
}

/* Ensure proper contrast for all text elements except buttons - commented out to fix button text colors
.survey-isolated-content > *:not(button):not([data-slot="button"]) {
  color: var(--survey-text);
}
*/

/* Override any conflicting Tailwind utilities - but not for buttons */
.survey-isolated-content :not(button):not([data-slot="button"]).text-current {
  color: var(--survey-text);
}

.survey-isolated-content .bg-current {
  background-color: var(--survey-surface);
}

.survey-isolated-content .border-current {
  border-color: var(--survey-border);
}